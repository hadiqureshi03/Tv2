---
import Layout from '../layouts/Layout.astro';
import Header from '../layouts/Header.astro'
import Navbar from '../layouts/Navbar.astro'
import Main from '../layouts/Main.astro'
import Footer from '../layouts/Footer.astro'

import Device from '../components/Device.astro'

import phoneLogo from '../assets/device-icons/phone_logo.webp';
import tabletLogo from '../assets/device-icons/tablet_logo.webp';
import tvLogo from '../assets/device-icons/tv_logo.webp';



const endpoint = 'https://fiyeiwrqesmfmqbrdowo.supabase.co/rest/v1/Devices'
const key = 'sb_publishable_lihVoWUrioW6Qv-LTMec1Q_fiLIZ-gp'

const options = {
    method: 'GET',
    headers: {
        apikey: key,
    },
};

const data = await fetch(endpoint, options)
.then((res) => res.json())

console.log(data)

---

<script>

    const device = document.querySelectorAll(".device-box")

    device.forEach(element => {
        element?.addEventListener('click', () => {
                element.classList.toggle('expanded')
        });
    });
  

</script>

<Layout>
   	<Header />
	<div class="page-wrapper">
		<Navbar />
		<div class="content-wrapper">
			<Main >
                <div id="main-container">

                    <div id="main-content">
                        <h1>Enheder</h1>
                        <a href="/">Tilbage</a>

                        {data.map((elem: { device_image: string; type: string; brand: string; }) => <Device deviceIcon={elem.device_image} deviceName={elem.type + ' - ' + elem.brand} lastUsed="12.12.2012 12:12 LT" />)}

                         
                    </div>

                </div>
			</Main>
			<Footer />
		</div>
	</div>
</Layout>

<style>
	.page-wrapper {
		display: flex;
		position: relative;
	}

	.content-wrapper {
		flex: 1;
	}

    #main-container {
        display: flex;
        justify-content: center;
    }

    #main-content {
        width: 85%;
        margin: 40px 0;
    }

    h1 {
        font-size: 36px;
        margin-bottom: 20px;
    }

    a {
        color: var(--primary-color);
        text-decoration: none;
        font-size: 18px;
        display: inline-block;
        margin-bottom: 20px;
    }

    .device-box {
        padding: 3%;
        margin-top: 20px;
        border-radius: 4px;
        background-color: #FFFFFF;
    }

    p {
        line-height: 160%;
        font-size: 24px;
    }

    #main-buttons {
        margin-top: 20px;
        display: flex;
        gap: 12px;
    }

    button {
        padding: 12px 32px;
        border-radius: 25px;
        border: none;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
        transition: opacity 0.2s ease;
    }

    button:hover {
        opacity: 0.9;
    }

    #data-button {
        background-color: var(--secondary-color);
        color: var(--background-color);
    }

    #delete-button {
        background-color: var(--primary-color);
        color: var(--background-color);
    }


   

	@media (max-width: 900px) {
	}
</style>