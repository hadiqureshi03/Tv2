---
import Welcome from '../components/Welcome.astro';
import Layout from '../layouts/Layout.astro';
import Header from '../layouts/Header.astro'
import Navbar from '../layouts/Navbar.astro'
import Main from '../layouts/Main.astro'
import Footer from '../layouts/Footer.astro'
import tv2ikon from '../assets/tv2ikon.svg';
import tv2ikon2 from '../assets/tv2ikon2.svg';
import tv2ikon3 from '../assets/tv2ikon3.svg';

// Welcome to Astro! Wondering what to do next? Check out the Astro documentation at https://docs.astro.build
// Don't want to use any of this? Delete everything in this file, the `assets`, `components`, and `layouts` directories, and start fresh.
---

<!-- Husk lave ref link i burger menu -->
<Layout>
	<Header />
	<div class="page-wrapper">
		<Navbar />
		<div class="content-wrapper">
			<Main >
				<div class="content-container">
					<h1>OVERSIGT</h1>

					<section class="subscription-section">
						<h2>TV 2 PLAY ABONNEMENT</h2>

						<div class="subscription-box">
							<div class="subscription-content">
								<h3>FIK DU IKKE DET HELE MED PÅ TV 2 PLAY?</h3>
								<p>Gå ikke glip af dagens nyheder, følg med i din favorit-sportsgren eller grin til knivskarp comedy. Nu kan du også tage TV 2 Play med på ferien i hele EU og se alt det indhold, du normalt har adgang til.</p>
							</div>
							<div class="subscription-right">
								<div class="subscription-price">
									<span>PRISER FRA 69KR./MD</span>
								</div>
								<a href="https://checkout.play.tv2.dk/" class="subscription-btn">Abonnement</a>
							</div>
						</div>
					</section>

					<section class="account-section">
						<h2>KONTOOPLYSNINGER</h2>

						<div class="account-box">
							<div class="account-header">
								<h2 class="account-name">Hans Hansen</h2>
								<p class="account-email">hans.hansen@gmail.com</p>
							</div>
							<div class="account-row expandable-row" id="change-account-row">
								<div class="row-header">
									<span class="account-label">Skift kontooplysninger</span>
									<span class="arrow-icon">›</span>
								</div>
								<div class="expandable-content">
									<form class="account-form" id="account-form">
										<label>
											FORNAVN
											<input type="text" placeholder="Fornavn" id="fornavn" required />
										</label>
										<label>
											MOBILNUMMER (VALGFRIT)
											<input type="tel" placeholder="Mobilnummer" id="mobilnummer" />
										</label>
										<label>
											FØDSELSDATO
											<input type="text" placeholder="Fødselsdato" id="fodselsdato" required />
										</label>
										<label>
											KØN
											<input type="text" placeholder="Køn" id="kon" required />
										</label>
										<p class="form-save-message" id="form-save-message">Dine ændringer er blevet gemt</p>
										<div class="form-buttons">
											<button type="button" class="btn-save" id="btn-save">Gem ændringer</button>
											<button type="button" class="btn-cancel">AFBRYD</button>
										</div>
									</form>
								</div>
							</div>
							<div class="account-row expandable-row" id="change-email-row">
								<div class="row-header">
									<span class="account-label">Skift e-mail</span>
									<span class="arrow-icon">›</span>
								</div>
								<div class="expandable-content">
									<form class="account-form" id="email-form">
										<label>
											NY E-MAIL
											<input type="email" placeholder="Ny e-mail" id="ny-email" required />
										</label>
										<p class="form-save-message" id="email-save-message">Dine ændringer er blevet gemt</p>
										<div class="form-buttons">
											<button type="button" class="btn-save" id="btn-email-save">Gem og fortsæt</button>
											<button type="button" class="btn-cancel" id="btn-email-cancel">AFBRYD</button>
										</div>
									</form>
								</div>
							</div>
							<div class="account-row expandable-row" id="change-password-row">
								<div class="row-header">
									<span class="account-label">Skift adgangskode</span>
									<span class="arrow-icon">›</span>
								</div>
								<div class="expandable-content">
									<form class="account-form" id="password-form">
										<label>
											NY ADGANGSKODE
											<div class="password-input-wrapper">
												<input type="password" placeholder="Ny adgangskode" id="ny-adgangskode" required />
												<button type="button" class="toggle-password" id="toggle-ny-adgangskode">VIS</button>
											</div>
										</label>
										<label>
											GENTAG NY ADGANGSKODE
											<div class="password-input-wrapper">
												<input type="password" placeholder="Gentag ny adgangskode" id="gentag-adgangskode" required />
												<button type="button" class="toggle-password" id="toggle-gentag-adgangskode">VIS</button>
											</div>
										</label>
										<p class="form-save-message" id="password-save-message">Dine ændringer er blevet gemt</p>
										<div class="form-buttons">
											<button type="button" class="btn-save" id="btn-password-save">Gem ændringer</button>
											<button type="button" class="btn-cancel" id="btn-password-cancel">AFBRYD</button>
										</div>
									</form>
								</div>
							</div>
						</div>
					</section>

					<div class="two-column-section">
						<section class="news-region-section">
							<div class="region-box">
								<h2>NYHEDSREGION</h2>
								<p class="region-label">HVOR VIL DU GERNE SE NYHEDER FRA?</p>
								<div class="region-select">
									<span>REGION</span>
									<select class="region-dropdown" id="region-dropdown">
										<option>TV 2 KOSMOPOL</option>
										<option>TV 2 ØST</option>
										<option>TV 2 FYN</option>
										<option>TV 2 SYD</option>
										<option>TV 2 NORD</option>
									</select>
									<p class="save-message" id="save-message">Dine ændringer er blevet gemt</p>
								</div>
							</div>
						</section>

						<section class="profiles-section">
							<div class="profiles-box">
								<h2>ADMINISTRER PROFILER</h2>
								<p class="profiles-count">5 PROFILER</p>
								<div class="profiles-button">
									<button class="btn-profiles">Administrer</button>
									<div class="profile-icons">
										<div class="profile-icon">
											<img src={tv2ikon.src} alt="Profile 1" />
										</div>
										<div class="profile-icon">
											<img src={tv2ikon2.src} alt="Profile 2" />
										</div>
										<div class="profile-icon">
											<img src={tv2ikon3.src} alt="Profile 3" />
										</div>
									</div>
									<span class="arrow">›</span>
								</div>
							</div>
						</section>
					</div>
				</div>
			</Main>
			<Footer />
		</div>
	</div>
</Layout>

<script>
	// @ts-nocheck - gør at value ikke bliver tjekket for typescript fejl 
	const regionDropdown = document.getElementById('region-dropdown');
	const saveMessage = document.getElementById('save-message');

	regionDropdown?.addEventListener('change', () => {
		// Vis beskeden
		saveMessage?.classList.add('show');

		// Skjul beskeden efter 3 sekunder
		setTimeout(() => {
			saveMessage?.classList.remove('show');
		}, 3000);
	});

	// Dropdown functionalitet for kontooplysninger
	const changeAccountRow = document.getElementById('change-account-row');
	const rowHeader = changeAccountRow?.querySelector('.row-header');

	rowHeader?.addEventListener('click', () => {
		changeAccountRow?.classList.toggle('expanded');
	});

	// Dropdown functionalitet for e-mail
	const changeEmailRow = document.getElementById('change-email-row');
	const emailRowHeader = changeEmailRow?.querySelector('.row-header');

	emailRowHeader?.addEventListener('click', () => {
		changeEmailRow?.classList.toggle('expanded');
	});

	// Dropdown functionalitet for adgangskode
	const changePasswordRow = document.getElementById('change-password-row');
	const passwordRowHeader = changePasswordRow?.querySelector('.row-header');

	passwordRowHeader?.addEventListener('click', () => {
		changePasswordRow?.classList.toggle('expanded');
	});

	// Save button funktionalitet
	const btnSave = document.getElementById('btn-save');
	const btnCancel = document.querySelector('.btn-cancel');
	const formSaveMessage = document.getElementById('form-save-message');
	const fornavn = document.getElementById('fornavn');
	const fodselsdato = document.getElementById('fodselsdato');
	const kon = document.getElementById('kon');
	const mobilnummer = document.getElementById('mobilnummer');

	btnSave?.addEventListener('click', () => {
		// Check required fields
		if (fornavn && fodselsdato && kon && fornavn.value && fodselsdato.value && kon.value) {
			// Viser beskeden
			formSaveMessage?.classList.add('show');

			// Fjerner values efter gemning
			fornavn.value = '';
			if (mobilnummer) mobilnummer.value = '';
			fodselsdato.value = '';
			kon.value = '';

			// fjerner besked efter 3 seconds
			setTimeout(() => {
				formSaveMessage?.classList.remove('show');
			}, 3000);
		}
	});

	// Cancel button funktionalitet
	btnCancel?.addEventListener('click', () => {
		// Fjerner alle values
		if (fornavn) fornavn.value = '';
		if (mobilnummer) mobilnummer.value = '';
		if (fodselsdato) fodselsdato.value = '';
		if (kon) kon.value = '';
	});

	// E-mail form funktionalitet
	const btnEmailSave = document.getElementById('btn-email-save');
	const btnEmailCancel = document.getElementById('btn-email-cancel');
	const emailSaveMessage = document.getElementById('email-save-message');
	const nyEmail = document.getElementById('ny-email');

	btnEmailSave?.addEventListener('click', () => {
		// Check required field
		if (nyEmail && nyEmail.value) {
			// Viser beskeden
			emailSaveMessage?.classList.add('show');

			// Fjerner value efter gemning
			nyEmail.value = '';

			// Gemmer besked efter 3 seconds
			setTimeout(() => {
				emailSaveMessage?.classList.remove('show');
			}, 3000);
		}
	});

	// Cancel button funktionalitet for e-mail
	btnEmailCancel?.addEventListener('click', () => {
		// Fjerner value
		if (nyEmail) nyEmail.value = '';
	});

	// Adgangskode form funktionalitet
	const btnPasswordSave = document.getElementById('btn-password-save');
	const btnPasswordCancel = document.getElementById('btn-password-cancel');
	const passwordSaveMessage = document.getElementById('password-save-message');
	const nyAdgangskode = document.getElementById('ny-adgangskode');
	const gentagAdgangskode = document.getElementById('gentag-adgangskode');

	btnPasswordSave?.addEventListener('click', () => {
		// Check required fields
		if (nyAdgangskode && gentagAdgangskode && nyAdgangskode.value && gentagAdgangskode.value) {
			// Viser beskeden
			passwordSaveMessage?.classList.add('show');

			// Fjerner values efter gemning
			nyAdgangskode.value = '';
			gentagAdgangskode.value = '';

			// Gemmer besked efter 3 seconds
			setTimeout(() => {
				passwordSaveMessage?.classList.remove('show');
			}, 3000);
		}
	});

	// Cancel button funktionalitet for adgangskode
	btnPasswordCancel?.addEventListener('click', () => {
		// Fjerner values
		if (nyAdgangskode) nyAdgangskode.value = '';
		if (gentagAdgangskode) gentagAdgangskode.value = '';
	});

	// Toggle password visibility funktionalitet
	const toggleNyAdgangskode = document.getElementById('toggle-ny-adgangskode');
	const toggleGentagAdgangskode = document.getElementById('toggle-gentag-adgangskode');

	toggleNyAdgangskode?.addEventListener('click', () => {
		if (nyAdgangskode) {
			if (nyAdgangskode.type === 'password') {
				nyAdgangskode.type = 'text';
				toggleNyAdgangskode.textContent = 'SKJUL';
			} else {
				nyAdgangskode.type = 'password';
				toggleNyAdgangskode.textContent = 'VIS';
			}
		}
	});

	toggleGentagAdgangskode?.addEventListener('click', () => {
		if (gentagAdgangskode) {
			if (gentagAdgangskode.type === 'password') {
				gentagAdgangskode.type = 'text';
				toggleGentagAdgangskode.textContent = 'SKJUL';
			} else {
				gentagAdgangskode.type = 'password';
				toggleGentagAdgangskode.textContent = 'VIS';
			}
		}
	});
</script>

<style>
	.page-wrapper {
		display: flex;
		position: relative;
	}

	.content-wrapper {
		flex: 1;
	}

	.content-container {
		max-width: 1200px;
		margin: 0 auto;
		padding: 40px 60px 120px;
	}

	.content-container h1 {
		font-family: 'TV2', sans-serif;
		font-size: var(--h1-size);
		font-weight: bold;
		color: var(--secondary-color);
		margin: 0 0 30px 0;
		letter-spacing: 0.02em;
	}

	.subscription-section h2 {
		font-family: 'TV2', sans-serif;
		font-size: 24px;
		font-weight: bold;
		color: var(--secondary-color);
		margin: 0 0 20px 0;
		letter-spacing: 0.02em;
	}

	.subscription-box {
		background-color: #FFFFFF;
		border-radius: 4px;
		padding: 40px;
		display: flex;
		justify-content: space-between;
		align-items: flex-start;
		gap: 40px;
	}

	.subscription-content {
		flex: 1;
	}

	.subscription-content h3 {
		font-family: 'TV2', sans-serif;
		font-size: 20px;
		font-weight: bold;
		color: var(--secondary-color);
		margin: 0 0 16px 0;
	}

	.subscription-content p {
		font-size: 16px;
		line-height: 1.6;
		color: var(--secondary-color);
		margin: 0;
		max-width: 700px;
	}

	.subscription-right {
		display: flex;
		flex-direction: column;
		align-items: flex-end;
		gap: 16px;
	}

	.subscription-price {
		font-size: 14px;
		font-weight: bold;
		color: #078A1D;
		padding-right: 10px;
		text-decoration: underline;
	}

	.subscription-btn {
		background-color: #078A1D;
		color: white;
		border: none;
		border-radius: 25px;
		padding: 12px 32px;
		font-size: 16px;
		font-weight: bold;
		cursor: pointer;
		transition: opacity 0.2s ease;
		text-decoration: none;
		display: inline-block;
	}

	.subscription-btn:hover {
		opacity: 0.9;
	}

	.account-section {
		margin-top: 40px;
	}

	.account-section h2 {
		font-family: 'TV2', sans-serif;
		font-size: 24px;
		font-weight: bold;
		color: var(--secondary-color);
		margin: 0 0 20px 0;
		letter-spacing: 0.02em;
	}

	.account-box {
		background-color: #FFFFFF;
		border-radius: 4px;
		padding: 40px;
		display: flex;
		flex-direction: column;
		gap: 24px;
	}

	.account-header {
		padding-bottom: 24px;
		border-bottom: 1px solid #E0E0E0;
	}

	.account-name {
		font-family: 'TV2', sans-serif;
		font-size: 24px;
		font-weight: 400 !important;
		color: var(--secondary-color);
		margin: 0 0 8px 0;
		letter-spacing: 0.02em;
	}

	.account-email {
		font-size: 14px;
		color: #0066CC;
		text-decoration: underline;
		margin: 0;
	}

	.account-row {
		display: flex;
		flex-direction: column;
		border-bottom: 1px solid #E0E0E0;
		transition: background-color 0.2s ease;
	}

	.account-row:hover {
		background-color: #f9f9f9;
	}

	.account-row:last-of-type {
		margin-bottom: 0;
	}

	.row-header {
		display: flex;
		justify-content: space-between;
		align-items: center;
		padding: 12px 0;
		cursor: pointer;
		width: 100%;
	}

	.account-label {
		font-size: 16px;
		font-weight: bold;
		color: var(--secondary-color);
	}

	.account-row .arrow {
		font-size: 1.5rem;
		line-height: 1;
		color: var(--secondary-color);
		margin-right: 10px;
	}

	.arrow-icon {
		font-size: 1.5rem;
		line-height: 1;
		color: var(--secondary-color);
		margin-right: 10px;
		transition: transform 0.3s ease;
	}

	.expandable-row.expanded .arrow-icon {
		transform: rotate(90deg);
	}

	.expandable-content {
		max-height: 0;
		overflow: hidden;
		transition: max-height 0.3s ease;
	}

	.expandable-row.expanded .expandable-content {
		max-height: 600px;
		padding: 20px 0;
	}

	.account-form {
		display: flex;
		flex-direction: column;
		gap: 16px;
	}

	.account-form label {
		display: flex;
		flex-direction: column;
		gap: 8px;
		font-size: 12px;
		font-weight: bold;
		color: var(--secondary-color);
		letter-spacing: 0.5px;
	}

	.password-input-wrapper {
		position: relative;
		display: flex;
		align-items: center;
	}

	.account-form input {
		width: 100%;
		padding: 12px 16px;
		border: 2px solid var(--secondary-color);
		border-radius: 4px;
		font-size: 16px;
		color: var(--secondary-color);
		background-color: #FFFFFF;
		box-sizing: border-box;
	}

	.password-input-wrapper input {
		padding-right: 60px;
	}

	.toggle-password {
		position: absolute;
		right: 12px;
		background: none;
		border: none;
		color: var(--secondary-color);
		font-size: 12px;
		font-weight: bold;
		cursor: pointer;
		padding: 4px 8px;
		transition: opacity 0.2s ease;
	}

	.toggle-password:hover {
		opacity: 0.7;
	}

	.account-form input::placeholder {
		color: #999;
	}

	.form-save-message {
		font-size: 14px;
		font-weight: bold;
		color: #078A1D;
		margin: 0;
		opacity: 0;
		transition: opacity 0.5s ease-in-out;
		pointer-events: none;
	}

	.form-save-message.show {
		opacity: 1;
	}

	.form-buttons {
		display: flex;
		gap: 12px;
		margin-top: 12px;
	}

	.btn-save,
	.btn-cancel {
		padding: 12px 32px;
		border-radius: 25px;
		border: none;
		font-size: 14px;
		font-weight: bold;
		cursor: pointer;
		transition: opacity 0.2s ease;
	}

	.btn-save {
		background-color: var(--secondary-color);
		color: white;
	}

	.btn-cancel {
		background-color: rgb(235, 235, 238);
		color: var(--secondary-color);
	}

	.btn-save:hover,
	.btn-cancel:hover {
		opacity: 0.9;
	}

	.edit-btn {
		background-color: #078A1D;
		color: white;
		border: none;
		border-radius: 25px;
		padding: 12px 32px;
		font-size: 16px;
		font-weight: bold;
		cursor: pointer;
		transition: opacity 0.2s ease;
		align-self: flex-start;
	}

	.edit-btn:hover {
		opacity: 0.9;
	}

	.two-column-section {
		display: grid;
		grid-template-columns: 1fr 1fr;
		gap: 40px;
		margin-top: 40px;
	}

	.news-region-section h2,
	.profiles-section h2 {
		font-family: 'TV2', sans-serif;
		font-size: 24px;
		font-weight: bold;
		color: var(--secondary-color);
		margin: 0 0 20px 0;
		letter-spacing: 0.02em;
	}

	.region-box,
	.profiles-box {
		background-color: #FFFFFF;
		border-radius: 4px;
		padding: 40px;
		display: flex;
		flex-direction: column;
		min-height: 200px;
	}

	.region-label {
		font-size: 14px;
		font-weight: normal;
		color: var(--secondary-color);
		margin: 0 0 24px 0;
	}

	.region-select {
		display: flex;
		flex-direction: column;
		gap: 12px;
		flex: 1;
	}

	.region-select span {
		font-size: 12px;
		font-weight: bold;
		color: var(--secondary-color);
		letter-spacing: 0.5px;
	}

	.region-dropdown {
		width: 100%;
		padding: 12px 16px;
		border: 2px solid var(--secondary-color);
		border-radius: 4px;
		font-size: 16px;
		font-weight: bold;
		color: var(--secondary-color);
		background-color: #FFFFFF;
		cursor: pointer;
		appearance: none;
		background-image: url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L6 6L11 1' stroke='%23000000' stroke-width='2' stroke-linecap='round'/%3E%3C/svg%3E");
		background-repeat: no-repeat;
		background-position: right 16px center;
		padding-right: 40px;
	}

	.save-message {
		font-size: 14px;
		font-weight: bold;
		color: #078A1D;
		margin: 12px 0 0 0;
		opacity: 0;
		transition: opacity 0.5s ease-in-out;
		pointer-events: none;
	}

	.save-message.show {
		opacity: 1;
	}

	.profiles-count {
		font-size: 12px;
		font-weight: bold;
		color: var(--secondary-color);
		letter-spacing: 0.5px;
		margin: 0 0 24px 0;
	}

	.profiles-button {
		display: flex;
		align-items: center;
		justify-content: space-between;
		gap: 16px;
		flex: 1;
	}

	.btn-profiles {
		background-color: var(--secondary-color);
		color: white;
		border: none;
		border-radius: 25px;
		padding: 12px 24px;
		font-size: 14px;
		font-weight: bold;
		cursor: pointer;
		transition: opacity 0.2s ease;
		white-space: nowrap;
	}

	.btn-profiles:hover {
		opacity: 0.9;
	}

	.profile-icons {
		display: flex;
		gap: 8px;
		align-items: center;
		margin-left: auto;
	}

	.profile-icon {
		width: 40px;
		height: 40px;
		border-radius: 50%;
		background-color: #E0E0E0;
		overflow: hidden;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.profile-icon img {
		width: 100%;
		height: 100%;
		object-fit: cover;
	}

	.profiles-button .arrow {
		font-size: 1.5rem;
		line-height: 1;
		color: var(--secondary-color);
		margin-right: 10px;
	}

	@media (max-width: 900px) {

		.content-container {
			padding: 24px;
		}

		.content-container h1 {
			text-align: center;
		}

		.subscription-section h2 {
			text-align: center;
		}

		.account-section h2 {
			text-align: center;
		}

		.subscription-box {
			padding: 24px;
			flex-direction: column;
		}

		.subscription-right {
			align-items: flex-start;
			width: 100%;
		}

		.account-box {
			padding: 24px;
		}

		.account-row {
			flex-direction: column;
			align-items: flex-start;
			gap: 8px;
		}

		.two-column-section {
			grid-template-columns: 1fr;
			gap: 40px;
		}

		.news-region-section h2,
		.profiles-section h2 {
			text-align: center;
		}

		.region-box,
		.profiles-box {
			padding: 24px;
		}
	}
</style>
